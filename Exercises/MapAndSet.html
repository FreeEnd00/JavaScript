<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Map() & Set() JS</title>
</head>
<body>
    <script>
        //esempio Map()
        let map = new Map();
        map.set('1','anulare'); // una chiave stringa
        map.set(1,"pollice");  // una chiave numerica
        map.set(true,"indice"); // una chiave booleana

        console.log(map.get('1'));
        console.log(map.get(1));
        console.log(map.get(true));
        console.log(map.size);
        
        let _ = "*****************"
        console.log(_);
        //usare un oggetto come chiave
        let carlotta = {nome: "Carlotta"};
        
        console.log(_);
        //per ogni utente conserviamo il loro numero di accessi
        let visitsCountMap = new Map();

        console.log(_);
        //carlotta diventa la chiave del Map
        visitsCountMap.set(carlotta,28052024);
        console.log(visitsCountMap.get(carlotta));


        let john = { name: "John" };
        let ben = { name: "Ben" };

        let visitsCountObj = {}; // try to use an object

        visitsCountObj[ben] = 234; // try to use ben object as the key
        visitsCountObj[john] = 123; // try to use john object as the key, ben object will get replaced
        

        // That's what got written!
        console.log( visitsCountObj["[object Object]"] ); // 123

                console.log(_);
        //iterazioni su Map()

        let recipeMap = new Map([
            ["pennette", 120],
            ["macinato",200],
            ["sale",1.3],
            ["sugo",100],
            ["cipolla",0.5],
            ["aglio",1]
        ]);

        //itera le chiavi
        for(let ingredienti of recipeMap.keys()){
            console.log(ingredienti);
        }

        //itera i valori
        for(let quantita of recipeMap.values()){
            console.log(quantita);
        };

        //itera [chiave,valore] 
        for(let ricetta of recipeMap){
            console.log(ricetta);
        };
                console.log(_);

        //forEach()

        recipeMap.forEach((value,key,map) => {
            console.log(`${key}: ${value}`);
        });
                console.log(_);
        //converire oggetto in Map()

        let oggetto = {
            nome: "Carlotta",
            eta: 22,
        };

        let mapFromObj = new Map(Object.entries(oggetto));
        console.log(mapFromObj.get("nome"))

                console.log(_);
        //convertire Map() in oggetto
        let price = Object.fromEntries([
            ['banana',1],
            ['orange',2],
            ["meat",4],
        ]);

        console.log(price.orange);

                console.log(_);
        //oppure

        let mapObj = new Map();
        mapObj.set("pistacchio",1);
        mapObj.set("noce",3);
        mapObj.set("arachide",5);

        // let obj = Object.fromEntries(mapObj.entries());
        let obj = Object.fromEntries(mapObj);

        console.log(obj.pistacchio);




        console.log(_);

        //Set()



        let setExample = new Set();
        
        let marcolino = {nome: "Marcolino"};
        let umberto = {nome: "Umberto"};
        let asya = {nome: "Asya"};

        setExample.add(marcolino);
        setExample.add(umberto);
        setExample.add(asya);
        setExample.add(marcolino);
        setExample.add(umberto);
        
        console.log(setExample.size);

        for(let utente of setExample){
            console.log(utente.nome);
        };

                console.log(_);

        //for..of and forEach



        let setExp = new Set(["tette","culo","viso"]);

        console.log("Ciclo for...of");

        for(let valore of setExp) console.log(valore);

        console.log("forEach");
        //oppure

        setExp.forEach((value, valueAgain, set) => {
            console.log(value);
        });


        //esercizi

        //unique(arr) crea funzione che ritorni un array con elementi unici

        function unique(arr){
            return Array.from(new Set(arr));
        };

        let arr = ["cane","gatto","topo","cane","topo","elefante"];
        console.log(unique(arr));

        //trova tutti gli anagrammi, dividili lettera per lettera, e riordinali per ottenere solo un anagramma

        // function aClean(arr){
        //     let map = new Map();

        //     for(let word of arr){
        //         let sorted = word
        //         .toLowerCase()
        //         .split('')
        //         .sort()
        //         .join('');
        //         map.set(sorted, word);
        //     }

        //     return Array.from(map.keys());
        // }






        // let arrAnagram = ["nap", "teachers", "cheaters", "PAN", "ear", "era", "hectares"];

        // console.log(aClean(arrAnagram));

        function aClean(arr){
            let obj ={};
            
            for(let i = 0; i < arr.length; i++){
                let sorted = arr[i].toLowerCase().split("").sort().join("");
                obj[sorted] = arr[i];
            }
            return Object.keys(obj);
        }

        let arrAnagram = ["nap", "teachers", "cheaters", "PAN", "ear", "era", "hectares"]

        console.log(aClean(arrAnagram));




        //far funzionare un .push() su una mappa

        let mappa = new Map();

        mappa.set("name","John");

        let keys = Array.from(mappa.keys());

        keys.push("more");

        console.log(keys);
    </script>
</body>
</html>